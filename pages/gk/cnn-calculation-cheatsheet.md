---
layout: page
title: CNN 計算問題まとめ（出力サイズ・パラメータ数）
permalink: /gk/cnn-calculation-cheatsheet/
tags: [gk, cnn, cheatsheet]
gk_section: ディープラーニングの応用例/画像認識/ネオコグニトロンとLeNet
gk_order: 5
---

## まず結論

* **CNNの計算問題は2種類だけ**

  * 出力サイズ
  * パラメータ数
* どちらも **決まった式に代入するだけ**
* G検定では「意味理解」より **正確な計算** が最優先

---

## ① 畳み込み層の出力サイズ

### 基本式（超重要）

```
出力サイズ = (入力サイズ + 2×パディング − カーネルサイズ) ÷ ストライド + 1
```

※ 縦・横それぞれ同じ計算

---

### 典型問題パターン

* 入力：H × W
* パディング：P
* カーネル：K × K
* ストライド：S

👉 **まず式を書く → 数字を代入 → +1を確認**

---

### ひっかけポイント（頻出）

* ❌ パディングを +P だけ足す（正しくは **2×P**）
* ❌ ストライドで掛け算する
* ❌ 最後の **+1 を忘れる**
* ❌ 割り算の端数を切り捨てる（G検定では割り切れる設定）

---

## ② 畳み込み層のパラメータ数

### 基本式

```
パラメータ数 = カーネル縦 × カーネル横 × 入力チャネル数 × 出力チャネル数 + バイアス
```

* バイアスは **出力チャネル数分**

---

### よくある条件

* カーネル：3 × 3
* 入力チャネル：Cin
* 出力チャネル：Cout

```
= 3 × 3 × Cin × Cout + Cout
```

---

### 具体例

* カーネル：3×3
* 入力チャネル：16
* 出力チャネル：32

```
3 × 3 × 16 × 32 + 32
= 4608 + 32
= 4640
```

---

### ひっかけポイント（頻出）

* ❌ 出力サイズを掛けてしまう
* ❌ バイアスを忘れる
* ❌ 入力チャネル数を1と勘違いする（RGBは3）

👉 **空間サイズは一切関係ない**

---

## ③ 全結合層（FC層）のパラメータ数

### 基本式

```
入力ノード数 × 出力ノード数 + バイアス
```

---

### 例

* 入力：128
* 出力：10

```
128 × 10 + 10 = 1290
```

---

## CNN 計算問題の整理表

| 種類        | 見る数字       | 空間サイズ    |
| --------- | ---------- | -------- |
| 出力サイズ     | 入力・P・K・S   | 関係あり     |
| Convパラメータ | K・Cin・Cout | **関係なし** |
| FCパラメータ   | 入力・出力      | 関係なし     |

---

## G検定 超頻出ミスまとめ

* 出力サイズ計算とパラメータ数計算を混同
* チャネル数の見落とし
* +1 / +バイアス忘れ

---

## まとめ（試験直前用）

* 出力サイズ：**式に代入**
* パラメータ数：**カーネル×チャネル**
* 空間サイズは **パラメータ計算に使わない**

👉 CNNの計算問題は **落とすと痛いが、対策すれば確実に取れる** 分野
