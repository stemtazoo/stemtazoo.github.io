---
layout: page
title: 連鎖律（Chain Rule）とは？【G検定対策】
permalink: /gk/chain-rule/
tags: [gk, neural_network]
---

## まず結論
- **連鎖律（Chain Rule）とは、複数の関数が合成されたときに微分を正しく計算するためのルール**である。  
- G検定では「**どんな場面で使うルールか**」「**他の概念（距離・確率・行列）との混同**」が問われる。

---

## 直感的な説明
連鎖律は、  
**「関数の中に、さらに関数が入っているときの微分のしかた」**です。

イメージとしては、

- スイッチA → スイッチB → 電球が光る  

このとき  
「電球の明るさがどう変わるか」を知りたければ、  
**途中のスイッチの影響をすべて順番につなげて考える**必要があります。

👉 これが「連鎖（Chain）」の意味です。

---

## 定義・仕組み
連鎖律（Chain Rule）は、

- ある関数の中に  
- 別の関数が入っている（合成関数）

ときに、その微分を計算するためのルールです。

### 典型的な状況
- \( y = f(g(x)) \) のような形  
- このとき  
  - **外側の関数の変化**
  - **内側の関数の変化**
  を掛け合わせて微分する

※ 数式の暗記は不要  
→ **「合成されていたら連鎖律」** が判断基準。

---

## いつ使う？（得意・不得意）
### 得意な場面
- ニューラルネットワークの学習
- 誤差逆伝播法（バックプロパゲーション）
- 活性化関数を含むモデルの微分

### 使わない・不要な場面
- 一次関数の微分
- 合成されていない単純な関数
- 確率分布の距離や類似度の計算

---

## G検定ひっかけポイント
ここが **今回の模擬試験の誤答ポイント** です。

### ひっかけ①  
**「確率分布間の距離を測定するとき」**  
❌ 不正解  

→ これは  
- KLダイバージェンス  
- Wasserstein距離  
などの話  
→ **連鎖律とは無関係**

---

### ひっかけ②  
**「行列の逆行列を計算する方法」**  
❌ 不正解  

→ 線形代数の話  
→ 微分ルールではない

---

### ひっかけ③  
**「一次関数の傾きを計算する」**  
❌ 不正解  

→ 一次関数はそのまま微分できる  
→ **連鎖する必要がない**

---

### 正解の判断基準
選択肢に  
- 「複数の関数」  
- 「合成」  
- 「微分を計算」  

がそろっていたら **連鎖律**。

---

## まとめ（試験直前用）
- 連鎖律は **合成関数の微分ルール**  
- ニューラルネットワークの学習で必須  
- 距離・確率・行列計算とは関係ない  
- **「関数が重なっているか？」で判断**

👉 **合成されていたら連鎖律**
